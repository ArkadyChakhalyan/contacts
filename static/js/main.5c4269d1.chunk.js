(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(32),r=n.n(c),i=n(112),s=n(14),o=n(10),l=n(194),u=n(195),j=n(25),b=n(189),d=n(81),O=n(173),m=n(184),f=n(185),x=function(e){return{type:"ON_DELETE_CONTACT",id:e}},h=n(104),p=n.n(h),g=n(23),v=n(4),N=n(79),C=n(1),w=Object(v.a)("div")((function(e){var t=e.theme;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(N.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(N.a)(t.palette.common.white,.25)}}})),S=Object(v.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),y=Object(v.a)(g.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width")}}})),T=function(e){var t=e.setSearchFilter;return Object(C.jsxs)(w,{children:[Object(C.jsx)(S,{children:Object(C.jsx)(p.a,{})}),Object(C.jsx)(y,{onChange:function(e){t(e.target.value)},placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})},k=function(e){var t=e.setSearchFilter,n=Object(j.b)(),a=Object(s.g)();return Object(C.jsxs)(b.a,{position:"sticky",sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Object(C.jsx)(d.a,{variant:"subtitle1",sx:{userSelect:"none",ml:3},children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object(C.jsx)(T,{setSearchFilter:t}),Object(C.jsxs)(O.a,{sx:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(m.a,{color:"inherit",onClick:function(){n({type:"ON_LOGOUT"}),a("/")},children:"\u0432\u044b\u0439\u0442\u0438"}),Object(C.jsx)(f.a,{sx:{m:2,ml:1}})]})]})},E=n(109),D=n.n(E),L=n(191),I=n(183),z=n(192),F=n(177),P=n(193),_=n(188),A=n(178),W=n(108),q=n.n(W),B=n(111),G=n(187),J=n(176),R=n(107),U=n.n(R),M=n(106),$=n.n(M),V=function(e){var t=e.open,n=e.onClose,a=e.anchor,c=e.contact,r=e.onPopupOpen,i=e.setEditedPressed,s=c.id,o=Object(j.b)();return Object(C.jsxs)(B.a,{anchorEl:a,open:t,onClose:n,onClick:n,children:[Object(C.jsxs)(G.a,{onClick:function(){i(),r(),n()},children:[Object(C.jsx)(J.a,{children:Object(C.jsx)($.a,{fontSize:"small"})}),"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"]}),Object(C.jsxs)(G.a,{onClick:function(){o(x(s)),n()},children:[Object(C.jsx)(J.a,{children:Object(C.jsx)(U.a,{fontSize:"small"})}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]})]})},H=n(17),K=n(181),Q=n(186),X=n(174),Y=n(180),Z=function(e){var t=e.contact,n=e.edit,c=e.onSubmit,r=t.firstName,i=t.lastName,s=t.number,l=Object(a.useState)(r),u=Object(o.a)(l,2),j=u[0],b=u[1],f=Object(a.useState)(i),x=Object(o.a)(f,2),h=x[0],p=x[1],g=Object(a.useState)(s),v=Object(o.a)(g,2),N=v[0],w=v[1],S=Object(a.useState)(!1),y=Object(o.a)(S,2),T=y[0],k=y[1];Object(a.useEffect)((function(){""!==j&&""!==N&&N.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?k(!1):k(!0)}),[j,N]);return n?Object(C.jsxs)(O.a,{component:"form",onSubmit:c,sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:2},children:[Object(C.jsx)(Y.a,{required:!0,label:"\u0418\u043c\u044f",id:"firstName",name:"firstName",variant:"standard",value:j,onChange:function(e){b(e.target.value)},size:"small",autoFocus:!0}),Object(C.jsx)(Y.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",id:"lastName",name:"lastName",variant:"standard",size:"small",value:h,onChange:function(e){p(e.target.value)}}),Object(C.jsx)(Y.a,{required:!0,label:"\u041d\u043e\u043c\u0435\u0440",id:"number",name:"number",variant:"standard",size:"small",value:N,onChange:function(e){w(e.target.value)}}),Object(C.jsx)(m.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:T,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):Object(C.jsxs)(L.a,{sx:{display:"flex",flexDirection:"column",alignSelf:"flex-start",gap:1.5,mt:2},children:[Object(C.jsxs)(I.a,{children:[Object(C.jsx)(d.a,{color:"#9e9e9e",children:"\u0418\u043c\u044f:"}),Object(C.jsx)(d.a,{sx:{ml:1},children:r})]}),i?Object(C.jsxs)(I.a,{children:[Object(C.jsx)(d.a,{color:"#9e9e9e",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(C.jsx)(d.a,{sx:{ml:1},children:i})]}):null,Object(C.jsxs)(I.a,{children:[Object(C.jsx)(d.a,{color:"#9e9e9e",children:"\u041d\u043e\u043c\u0435\u0440:"}),Object(C.jsx)(d.a,{sx:{ml:1},children:s})]})]})},ee=n(75),te=n.n(ee),ne={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},ae=function(e){var t=e.open,n=e.onPopupClose,a=e.contact,c=e.edit,r=e.setEditOff,i=e.setEditOn,s=Object(j.b)(),o=a.firstName,l=a.lastName,u=a.shortName,b=a.image,h=a.id,p=l?"".concat(o," ").concat(l):o,g=function(){n(),r()};return Object(C.jsx)(K.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:g,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500},children:Object(C.jsx)(X.a,{in:t,children:Object(C.jsxs)(O.a,{sx:ne,children:[Object(C.jsx)(z.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:g,children:Object(C.jsx)(te.a,{})}),Object(C.jsx)(f.a,{src:b,size:"large",sx:{width:64,height:64,mb:2},children:b?"":u}),Object(C.jsx)(d.a,{variant:"h6",component:"h2",children:p}),Object(C.jsx)(Z,{contact:a,edit:c,onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);r();var n=Object(H.a)(Object(H.a)({},a),{},{firstName:t.get("firstName"),lastName:t.get("lastName"),number:t.get("number")});s(function(e,t){return{type:"ON_EDIT_CONTACT",contact:e,id:t}}(n,h))}}),c?null:Object(C.jsx)(m.a,{sx:{mt:2},fullWidth:!0,size:"large",onClick:i,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(C.jsx)(m.a,{size:"large",onClick:function(){g(),s(x(h))},fullWidth:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})})},ce=function(e){var t=e.contact,n=e.loading,c=t.firstName,r=t.lastName,i=t.number,s=t.shortName,l=t.image,u=t.id,j=r?"".concat(c," ").concat(r):c,b=Object(a.useState)(null),d=Object(o.a)(b,2),O=d[0],m=d[1],x=!!O,h=Object(a.useState)(!1),p=Object(o.a)(h,2),g=p[0],v=p[1],N=Object(a.useState)(!1),w=Object(o.a)(N,2),S=w[0],y=w[1],T=function(){v(!0)};return Object(C.jsxs)(a.Fragment,{children:[Object(C.jsx)(ae,{open:g,onPopupClose:function(){v(!1),y(!1)},contact:t,setEditOn:function(){return y(!0)},setEditOff:function(){return y(!1)},edit:S}),Object(C.jsx)(I.a,{disablePadding:!0,secondaryAction:n?null:Object(C.jsx)(z.a,{edge:"end","aria-label":"\u041c\u0435\u043d\u044e",onClick:function(e){e.stopPropagation(),m(e.currentTarget)},children:Object(C.jsx)(q.a,{})}),children:Object(C.jsxs)(F.a,{onClick:T,sx:{p:2},children:[Object(C.jsx)(P.a,{children:n?Object(C.jsx)(_.a,{animation:"wave",variant:"circular",width:40,height:40}):Object(C.jsx)(f.a,{src:l,children:l?"":s})}),n?Object(C.jsxs)(A.a,{children:[Object(C.jsx)(_.a,{animation:"wave",width:160}),Object(C.jsx)(_.a,{animation:"wave",width:96})]}):Object(C.jsx)(A.a,{primary:j,secondary:i})]})},u),Object(C.jsx)(V,{open:x,onClose:function(e){e&&e.stopPropagation(),m(null)},anchor:O,contact:t,onPopupOpen:T,setEditedPressed:function(){return y(!0)}})]})},re=function(e){var t=e.searchFilter,n=e.contacts,c=Object(a.useState)(!0),r=Object(o.a)(c,2),i=r[0],s=r[1];return Object(a.useEffect)((function(){i||s(!0);var e=setTimeout((function(){s(!1)}),600);return function(){clearTimeout(e)}}),[n,t]),0===n.length?Object(C.jsx)(d.a,{variant:"subtitle1",align:"center",sx:{mt:2},children:"\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442!"}):0===n.filter((function(e){var n=e.firstName,a=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return n.toLowerCase().includes(r)||a.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).length&&n.length>0?Object(C.jsx)(d.a,{variant:"subtitle1",align:"center",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):Object(C.jsx)(L.a,{children:n.filter((function(e){var n=e.firstName,a=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return n.toLowerCase().includes(r)||a.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).sort((function(e,t){return ie(e.firstName.toLowerCase(),t.firstName.toLowerCase())})).map((function(e){return Object(C.jsx)(ce,{contact:e,loading:i},e.id)}))})},ie=function(e,t){return e>t?1:e===t?0:e<t?-1:void 0},se={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},oe=function(e){var t=e.open,n=e.onClose,c=Object(j.b)(),r=Object(a.useState)(""),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(a.useState)(""),b=Object(o.a)(u,2),x=b[0],h=b[1],p=Object(a.useState)(!1),g=Object(o.a)(p,2),v=g[0],N=g[1];Object(a.useEffect)((function(){""!==s&&""!==x&&x.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?N(!1):N(!0)}),[s,x]);return Object(C.jsx)(K.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:n,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500},children:Object(C.jsx)(X.a,{in:t,children:Object(C.jsxs)(O.a,{sx:se,children:[Object(C.jsx)(z.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:n,children:Object(C.jsx)(te.a,{})}),Object(C.jsx)(f.a,{size:"large",sx:{width:64,height:64,mb:2}}),Object(C.jsx)(d.a,{variant:"h6",component:"h2",children:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"}),Object(C.jsxs)(O.a,{component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget),a={firstName:t.get("firstName"),lastName:t.get("lastName"),number:t.get("number")};c({type:"ON_ADD_CONTACT",contact:a}),n()},sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:3},children:[Object(C.jsx)(Y.a,{required:!0,label:"\u0418\u043c\u044f",id:"firstName",name:"firstName",variant:"standard",size:"small",onChange:function(e){return l(e.target.value)},autoFocus:!0}),Object(C.jsx)(Y.a,{id:"lastName",name:"lastName",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",variant:"standard",size:"small"}),Object(C.jsx)(Y.a,{required:!0,id:"number",name:"number",label:"\u041d\u043e\u043c\u0435\u0440",variant:"standard",size:"small",onChange:function(e){return h(e.target.value)}}),Object(C.jsx)(m.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:v,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),Object(C.jsx)(m.a,{size:"large",onClick:n,fullWidth:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})},le=function(){var e=Object(j.c)((function(e){return e.user})),t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),b=Object(o.a)(i,2),d=b[0],O=b[1];return e?Object(C.jsxs)(a.Fragment,{children:[Object(C.jsx)(oe,{open:d,onClose:function(){O(!1)}}),Object(C.jsx)(k,{setSearchFilter:r}),Object(C.jsxs)(l.a,{maxWidth:"sm",sx:{pt:3},children:[Object(C.jsx)(re,{searchFilter:c,contacts:e.contacts}),Object(C.jsx)(u.a,{color:"primary","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",disableFocusRipple:!0,onClick:function(){O(!0)},sx:{position:"fixed",right:"32px",bottom:"32px"},children:Object(C.jsx)(D.a,{})})]})]}):Object(C.jsx)(s.a,{to:"/",replace:!0})},ue=n(179),je=n(73),be=n(74),de=[{login:"user",password:"password",contacts:[{id:0,firstName:"\u0410\u043b\u0435\u043d\u0430",lastName:"\u041f\u0435\u0442\u0440\u043e\u0432\u0430",shortName:"\u0410",number:"+79211234567",picture:null},{id:1,firstName:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439",lastName:"\u0418\u0432\u0430\u043d\u043e\u0432",shortName:"\u0414",number:"+79991234567",picture:null},{id:2,firstName:"\u041c\u0430\u043c\u0430",lastName:"",shortName:"\u041c",number:"+79091234567",picture:null}]}],Oe=new(function(){function e(){Object(je.a)(this,e)}return Object(be.a)(e,[{key:"onLogin",value:function(e,t){return new Promise((function(n,a){var c=de.find((function(n){return n.login.toLowerCase()===e.toLowerCase()&&n.password===t}));setTimeout((function(){c?n(c):a(new Error("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"))}),100)}))}}]),e}()),me=function(){var e=Object(j.b)(),t=Object(s.g)(),n=Object(a.useState)(!0),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(!1),u=Object(o.a)(l,2),b=u[0],d=u[1],O=Object(a.useState)(!1),f=Object(o.a)(O,2),x=f[0],h=f[1],p=Object(a.useState)(""),g=Object(o.a)(p,2),v=g[0],N=g[1],w=Object(a.useState)(""),S=Object(o.a)(w,2),y=S[0],T=S[1];return Object(a.useEffect)((function(){i(""===v||""===y),""!==y&&(d(!1),h(!1))}),[v,y]),Object(C.jsxs)(ue.a,{component:"form",onSubmit:function(n){n.preventDefault();var a=new FormData(n.currentTarget);Oe.onLogin(a.get("login"),a.get("password")).then((function(n){e({type:"ON_LOGIN",user:n}),t("/contacts")})).catch((function(){d(!0),h(!0),T("")}))},noValidate:!0,sx:{mt:1},children:[Object(C.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"login",autoFocus:!0,error:b,onChange:function(e){N(e.target.value)}}),Object(C.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",error:x,onChange:function(e){T(e.target.value)},value:y}),Object(C.jsx)(m.a,{type:"submit",fullWidth:!0,disabled:r,variant:"contained",sx:{mt:3,mb:2},children:"\u0432\u043e\u0439\u0442\u0438"})]})},fe=function(){return Object(C.jsx)(l.a,{maxWidth:"xs",children:Object(C.jsxs)(ue.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(C.jsx)(f.a,{sx:{m:2}}),Object(C.jsx)(d.a,{component:"h1",variant:"h5",children:"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(C.jsx)(me,{})]})})},xe=function(){return Object(C.jsxs)(s.d,{children:[Object(C.jsx)(s.b,{path:"/",element:Object(C.jsx)(fe,{})}),Object(C.jsx)(s.b,{path:"/contacts",element:Object(C.jsx)(le,{})})]})},he=n(110),pe=n(16),ge={user:null,uniqueId:3},ve=function(e,t){return Object(H.a)(Object(H.a)({},t),{},{user:e})},Ne=function(e){return Object(H.a)(Object(H.a)({},e),{},{user:null})},Ce=function(e,t){var n=t.user,a=t.uniqueId,c=n.contacts,r=e.firstName,i=e.lastName,s=e.number,o={id:a,firstName:r,lastName:i,shortName:r[0].toUpperCase(),number:s},l=[].concat(Object(pe.a)(c),[o]);return Object(H.a)(Object(H.a)({},t),{},{uniqueId:++a,user:Object(H.a)(Object(H.a)({},n),{},{contacts:l})})},we=function(e,t,n){var a=n.user,c=a.contacts,r=c.findIndex((function(e){return t===e.id})),i=[].concat(Object(pe.a)(c.slice(0,r)),[e],Object(pe.a)(c.slice(r+1)));return Object(H.a)(Object(H.a)({},n),{},{user:Object(H.a)(Object(H.a)({},a),{},{contacts:i})})},Se=function(e,t){var n=t.user,a=n.contacts,c=a.findIndex((function(t){return e===t.id})),r=[].concat(Object(pe.a)(a.slice(0,c)),Object(pe.a)(a.slice(c+1)));return Object(H.a)(Object(H.a)({},t),{},{user:Object(H.a)(Object(H.a)({},n),{},{contacts:r})})},ye=localStorage.getItem("contactsSPA")?JSON.parse(localStorage.getItem("contactsSPA")):void 0,Te=Object(he.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_LOGIN":return ve(t.user,e);case"ON_LOGOUT":return Ne(e);case"ON_ADD_CONTACT":return Ce(t.contact,e);case"ON_EDIT_CONTACT":return we(t.contact,t.id,e);case"ON_DELETE_CONTACT":return Se(t.id,e);default:return e}}),ye);Te.subscribe((function(){localStorage.setItem("contactsSPA",JSON.stringify(Te.getState()))}));n(133);r.a.render(Object(C.jsx)(a.StrictMode,{children:Object(C.jsx)(j.a,{store:Te,children:Object(C.jsx)(i.a,{children:Object(C.jsx)(xe,{})})})}),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.5c4269d1.chunk.js.map