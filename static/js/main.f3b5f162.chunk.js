(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(31),r=n.n(c),i=n(124),s=n(14),o=n(8),l=n(215),u=n(206),j=n(216),b=n(26),d=n(210),O=n(217),m=n(86),f=n(211),x=n(197),h=function(e){return{type:"ON_DELETE_CONTACT",id:e}},p=n(115),g=n.n(p),v=n(24),N=n(4),C=n(84),w=n(1),S=Object(N.a)("div")((function(e){var t=e.theme;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(C.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(C.a)(t.palette.common.white,.25)}}})),y=Object(N.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),T=Object(N.a)(v.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width")}}})),k=function(e){var t=e.setSearchFilter;return Object(w.jsxs)(S,{children:[Object(w.jsx)(y,{children:Object(w.jsx)(g.a,{})}),Object(w.jsx)(T,{onChange:function(e){t(e.target.value)},placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})},E=function(e){var t=e.setSearchFilter,n=Object(b.b)(),a=Object(s.g)();return Object(w.jsxs)(O.a,{position:"sticky",sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Object(w.jsx)(m.a,{variant:"subtitle1",sx:{userSelect:"none",ml:3},children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object(w.jsx)(k,{setSearchFilter:t}),Object(w.jsxs)(x.a,{sx:{display:"flex",alignItems:"center"},children:[Object(w.jsx)(d.a,{color:"inherit",onClick:function(){n({type:"ON_LOGOUT"}),a("/")},children:"\u0432\u044b\u0439\u0442\u0438"}),Object(w.jsx)(f.a,{sx:{m:2,ml:1}})]})]})},D=n(120),L=n.n(D),I=n(219),z=n(220),F=n(209),P=n(221),_=n(203),A=n(204),W=n(214),q=n(119),B=n.n(q),G=n(122),J=n(213),R=n(202),U=n(118),M=n.n(U),$=n(117),V=n.n($),H=function(e){var t=e.open,n=e.onClose,a=e.anchor,c=e.contact,r=e.onPopupOpen,i=e.setEditedPressed,s=c.id,o=Object(b.b)();return Object(w.jsxs)(G.a,{anchorEl:a,open:t,onClose:n,onClick:n,children:[Object(w.jsxs)(J.a,{onClick:function(){i(),r(),n()},children:[Object(w.jsx)(R.a,{children:Object(w.jsx)(V.a,{fontSize:"small"})}),"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"]}),Object(w.jsxs)(J.a,{onClick:function(){o(h(s)),n()},children:[Object(w.jsx)(R.a,{children:Object(w.jsx)(M.a,{fontSize:"small"})}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]})]})},K=n(17),Q=n(212),X=n(208),Y=n(198),Z=n(207),ee=function(e){var t=e.contact,n=e.edit,c=e.onSubmit,r=t.firstName,i=t.lastName,s=t.number,l=Object(a.useState)(r),u=Object(o.a)(l,2),j=u[0],b=u[1],O=Object(a.useState)(i),f=Object(o.a)(O,2),h=f[0],p=f[1],g=Object(a.useState)(s),v=Object(o.a)(g,2),N=v[0],C=v[1],S=Object(a.useState)(!1),y=Object(o.a)(S,2),T=y[0],k=y[1];Object(a.useEffect)((function(){""!==j&&""!==N&&N.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?k(!1):k(!0)}),[j,N]);return n?Object(w.jsxs)(x.a,{component:"form",onSubmit:c,sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:2},children:[Object(w.jsx)(Z.a,{required:!0,label:"\u0418\u043c\u044f",id:"firstName",name:"firstName",variant:"standard",value:j,onChange:function(e){b(e.target.value)},size:"small",autoFocus:!0}),Object(w.jsx)(Z.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",id:"lastName",name:"lastName",variant:"standard",size:"small",value:h,onChange:function(e){p(e.target.value)}}),Object(w.jsx)(Z.a,{required:!0,label:"\u041d\u043e\u043c\u0435\u0440",id:"number",name:"number",variant:"standard",size:"small",value:N,onChange:function(e){C(e.target.value)}}),Object(w.jsx)(d.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:T,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):Object(w.jsxs)(I.a,{sx:{display:"flex",flexDirection:"column",alignSelf:"flex-start",gap:1.5,mt:2},children:[Object(w.jsxs)(F.a,{children:[Object(w.jsx)(m.a,{color:"#9e9e9e",children:"\u0418\u043c\u044f:"}),Object(w.jsx)(m.a,{sx:{ml:1},children:r})]}),i?Object(w.jsxs)(F.a,{children:[Object(w.jsx)(m.a,{color:"#9e9e9e",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(w.jsx)(m.a,{sx:{ml:1},children:i})]}):null,Object(w.jsxs)(F.a,{children:[Object(w.jsx)(m.a,{color:"#9e9e9e",children:"\u041d\u043e\u043c\u0435\u0440:"}),Object(w.jsx)(m.a,{sx:{ml:1},children:s})]})]})},te=n(80),ne=n.n(te),ae={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},ce=function(e){var t=e.open,n=e.onPopupClose,a=e.contact,c=e.edit,r=e.setEditOff,i=e.setEditOn,s=Object(b.b)(),o=a.firstName,l=a.lastName,u=a.shortName,j=a.image,O=a.id,p=l?"".concat(o," ").concat(l):o,g=function(){n(),r()};return Object(w.jsx)(X.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:g,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500},children:Object(w.jsx)(Y.a,{in:t,children:Object(w.jsxs)(x.a,{sx:ae,children:[Object(w.jsx)(z.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:g,children:Object(w.jsx)(ne.a,{})}),Object(w.jsx)(f.a,{src:j,size:"large",sx:{width:64,height:64,mb:2},children:j?"":u}),Object(w.jsx)(m.a,{variant:"h6",component:"h2",children:p}),Object(w.jsx)(ee,{contact:a,edit:c,onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);r();var n=Object(K.a)(Object(K.a)({},a),{},{firstName:t.get("firstName"),lastName:t.get("lastName"),number:t.get("number")});s(function(e,t){return{type:"ON_EDIT_CONTACT",contact:e,id:t}}(n,O))}}),c?null:Object(w.jsx)(d.a,{sx:{mt:2},fullWidth:!0,size:"large",onClick:i,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(w.jsx)(d.a,{size:"large",onClick:function(){g(),s(h(O))},fullWidth:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})})},re=function(e){var t=e.contact,n=e.loading,c=t.firstName,r=t.lastName,i=t.number,s=t.shortName,l=t.image,u=t.id,j=r?"".concat(c," ").concat(r):c,b=Object(a.useState)(null),d=Object(o.a)(b,2),O=d[0],m=d[1],x=!!O,h=Object(a.useState)(!1),p=Object(o.a)(h,2),g=p[0],v=p[1],N=Object(a.useState)(!1),C=Object(o.a)(N,2),S=C[0],y=C[1],T=function(){v(!0)};return Object(w.jsxs)(a.Fragment,{children:[Object(w.jsx)(ce,{open:g,onPopupClose:function(){v(!1),y(!1)},contact:t,setEditOn:function(){return y(!0)},setEditOff:function(){return y(!1)},edit:S}),Object(w.jsx)(F.a,{disablePadding:!0,secondaryAction:n?null:Object(w.jsx)(z.a,{edge:"end","aria-label":"\u041c\u0435\u043d\u044e",onClick:function(e){e.stopPropagation(),m(e.currentTarget)},children:Object(w.jsx)(B.a,{})}),children:Object(w.jsxs)(_.a,{onClick:T,sx:{p:2},children:[Object(w.jsx)(P.a,{children:n?Object(w.jsx)(W.a,{animation:"wave",variant:"circular",width:40,height:40}):Object(w.jsx)(f.a,{src:l,children:l?"":s})}),n?Object(w.jsxs)(A.a,{children:[Object(w.jsx)(W.a,{animation:"wave",width:160}),Object(w.jsx)(W.a,{animation:"wave",width:96})]}):Object(w.jsx)(A.a,{primary:j,secondary:i})]})},u),Object(w.jsx)(H,{open:x,onClose:function(e){e&&e.stopPropagation(),m(null)},anchor:O,contact:t,onPopupOpen:T,setEditedPressed:function(){return y(!0)}})]})},ie=function(e){var t=e.searchFilter,n=e.contacts,c=Object(a.useState)(!0),r=Object(o.a)(c,2),i=r[0],s=r[1];return Object(a.useEffect)((function(){i||s(!0);var e=setTimeout((function(){s(!1)}),600);return function(){clearTimeout(e)}}),[n,t]),0===n.length?Object(w.jsx)(m.a,{variant:"subtitle1",align:"center",sx:{mt:2},children:"\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442!"}):0===n.filter((function(e){var n=e.firstName,a=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return n.toLowerCase().includes(r)||a.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).length&&n.length>0?Object(w.jsx)(m.a,{variant:"subtitle1",align:"center",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):Object(w.jsx)(I.a,{children:n.filter((function(e){var n=e.firstName,a=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return n.toLowerCase().includes(r)||a.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).sort((function(e,t){return se(e.firstName.toLowerCase(),t.firstName.toLowerCase())})).map((function(e){return Object(w.jsx)(re,{contact:e,loading:i},e.id)}))})},se=function(e,t){return e>t?1:e===t?0:e<t?-1:void 0},oe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},le=function(e){var t=e.open,n=e.onClose,c=Object(b.b)(),r=Object(a.useState)(""),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),O=j[0],h=j[1],p=Object(a.useState)(!1),g=Object(o.a)(p,2),v=g[0],N=g[1];Object(a.useEffect)((function(){""!==s&&""!==O&&O.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?N(!1):N(!0)}),[s,O]);return Object(w.jsx)(X.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:n,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500},children:Object(w.jsx)(Y.a,{in:t,children:Object(w.jsxs)(x.a,{sx:oe,children:[Object(w.jsx)(z.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:n,children:Object(w.jsx)(ne.a,{})}),Object(w.jsx)(f.a,{size:"large",sx:{width:64,height:64,mb:2}}),Object(w.jsx)(m.a,{variant:"h6",component:"h2",children:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"}),Object(w.jsxs)(x.a,{component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget),a={firstName:t.get("firstName"),lastName:t.get("lastName"),number:t.get("number")};c({type:"ON_ADD_CONTACT",contact:a}),n()},sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:3},children:[Object(w.jsx)(Z.a,{required:!0,label:"\u0418\u043c\u044f",id:"firstName",name:"firstName",variant:"standard",size:"small",onChange:function(e){return l(e.target.value)},autoFocus:!0}),Object(w.jsx)(Z.a,{id:"lastName",name:"lastName",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",variant:"standard",size:"small"}),Object(w.jsx)(Z.a,{required:!0,id:"number",name:"number",label:"\u041d\u043e\u043c\u0435\u0440",variant:"standard",size:"small",onChange:function(e){return h(e.target.value)}}),Object(w.jsx)(d.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:v,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),Object(w.jsx)(d.a,{size:"large",onClick:n,fullWidth:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})},ue=function(){var e=Object(b.c)((function(e){return e.user})),t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),d=Object(o.a)(i,2),O=d[0],m=d[1];return e?Object(w.jsxs)(a.Fragment,{children:[Object(w.jsx)(le,{open:O,onClose:function(){m(!1)}}),Object(w.jsx)(E,{setSearchFilter:r}),Object(w.jsxs)(l.a,{maxWidth:"sm",sx:{pt:3},children:[Object(w.jsx)(ie,{searchFilter:c,contacts:e.contacts}),Object(w.jsx)(u.a,{placement:"left",TransitionComponent:Y.a,enterDelay:500,leaveDelay:200,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",children:Object(w.jsx)(j.a,{color:"primary","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",disableFocusRipple:!0,onClick:function(){m(!0)},sx:{position:"fixed",right:"32px",bottom:"32px"},children:Object(w.jsx)(L.a,{})})})]})]}):Object(w.jsx)(s.a,{to:"/",replace:!0})},je=n(205),be=n(78),de=n(79),Oe=[{login:"user",password:"password",contacts:[{id:0,firstName:"\u0410\u043b\u0435\u043d\u0430",lastName:"\u041f\u0435\u0442\u0440\u043e\u0432\u0430",shortName:"\u0410",number:"+79211234567",picture:null},{id:1,firstName:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439",lastName:"\u0418\u0432\u0430\u043d\u043e\u0432",shortName:"\u0414",number:"+79991234567",picture:null},{id:2,firstName:"\u041c\u0430\u043c\u0430",lastName:"",shortName:"\u041c",number:"+79091234567",picture:null}]}],me=new(function(){function e(){Object(be.a)(this,e)}return Object(de.a)(e,[{key:"onLogin",value:function(e,t){return new Promise((function(n,a){var c=Oe.find((function(n){return n.login.toLowerCase()===e.toLowerCase()&&n.password===t}));setTimeout((function(){c?n(c):a(new Error("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"))}),100)}))}}]),e}()),fe=function(){var e=Object(b.b)(),t=Object(s.g)(),n=Object(a.useState)(!0),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(!1),u=Object(o.a)(l,2),j=u[0],O=u[1],m=Object(a.useState)(!1),f=Object(o.a)(m,2),h=f[0],p=f[1],g=Object(a.useState)(""),v=Object(o.a)(g,2),N=v[0],C=v[1],S=Object(a.useState)(""),y=Object(o.a)(S,2),T=y[0],k=y[1];return Object(a.useEffect)((function(){i(""===N||""===T),""!==T&&(O(!1),p(!1))}),[N,T]),Object(w.jsxs)(x.a,{component:"form",onSubmit:function(n){n.preventDefault();var a=new FormData(n.currentTarget);me.onLogin(a.get("login"),a.get("password")).then((function(n){e({type:"ON_LOGIN",user:n}),t("/contacts")})).catch((function(){O(!0),p(!0),k("")}))},noValidate:!0,sx:{mt:1},children:[Object(w.jsx)(Z.a,{margin:"normal",required:!0,fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"login",autoFocus:!0,error:j,onChange:function(e){C(e.target.value)}}),Object(w.jsx)(Z.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",error:h,onChange:function(e){k(e.target.value)},value:T}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,disabled:r,variant:"contained",sx:{mt:3,mb:2},children:"\u0432\u043e\u0439\u0442\u0438"})]})},xe=function(){return Object(w.jsx)(l.a,{maxWidth:"xs",children:Object(w.jsxs)(je.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(f.a,{sx:{m:2,width:56,height:56}}),Object(w.jsx)(m.a,{component:"h1",variant:"h5",children:"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(w.jsx)(fe,{})]})})},he=function(){return Object(w.jsxs)(s.d,{children:[Object(w.jsx)(s.b,{path:"/",element:Object(w.jsx)(xe,{})}),Object(w.jsx)(s.b,{path:"/contacts",element:Object(w.jsx)(ue,{})})]})},pe=n(121),ge=n(16),ve={user:null,uniqueId:3},Ne=function(e,t){return Object(K.a)(Object(K.a)({},t),{},{user:e})},Ce=function(e){return Object(K.a)(Object(K.a)({},e),{},{user:null})},we=function(e,t){var n=t.user,a=t.uniqueId,c=n.contacts,r=e.firstName,i=e.lastName,s=e.number,o={id:a,firstName:r,lastName:i,shortName:r[0].toUpperCase(),number:s},l=[].concat(Object(ge.a)(c),[o]);return Object(K.a)(Object(K.a)({},t),{},{uniqueId:++a,user:Object(K.a)(Object(K.a)({},n),{},{contacts:l})})},Se=function(e,t,n){var a=n.user,c=a.contacts,r=c.findIndex((function(e){return t===e.id})),i=[].concat(Object(ge.a)(c.slice(0,r)),[e],Object(ge.a)(c.slice(r+1)));return Object(K.a)(Object(K.a)({},n),{},{user:Object(K.a)(Object(K.a)({},a),{},{contacts:i})})},ye=function(e,t){var n=t.user,a=n.contacts,c=a.findIndex((function(t){return e===t.id})),r=[].concat(Object(ge.a)(a.slice(0,c)),Object(ge.a)(a.slice(c+1)));return Object(K.a)(Object(K.a)({},t),{},{user:Object(K.a)(Object(K.a)({},n),{},{contacts:r})})},Te=localStorage.getItem("contactsSPA")?JSON.parse(localStorage.getItem("contactsSPA")):void 0,ke=Object(pe.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_LOGIN":return Ne(t.user,e);case"ON_LOGOUT":return Ce(e);case"ON_ADD_CONTACT":return we(t.contact,e);case"ON_EDIT_CONTACT":return Se(t.contact,t.id,e);case"ON_DELETE_CONTACT":return ye(t.id,e);default:return e}}),Te);ke.subscribe((function(){localStorage.setItem("contactsSPA",JSON.stringify(ke.getState()))}));n(154);r.a.render(Object(w.jsx)(a.StrictMode,{children:Object(w.jsx)(b.a,{store:ke,children:Object(w.jsx)(i.a,{children:Object(w.jsx)(he,{})})})}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.f3b5f162.chunk.js.map