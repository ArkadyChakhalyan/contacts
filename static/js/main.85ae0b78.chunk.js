(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{130:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(32),r=a.n(c),s=a(106),i=a(14),o=a(8),l=a(190),j=a(188),u=a(25),b=a(185),O=a(76),d=a(170),m=a(181),x=a(182),f=function(e){return{type:"ON_DELETE_CONTACT",id:e}},h=a(98),p=a.n(h),g=a(22),N=a(4),v=a(167),C=a(1),S=Object(N.a)("div")((function(e){var t=e.theme;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(v.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(v.a)(t.palette.common.white,.25)}}})),w=Object(N.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),y=Object(N.a)(g.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width")}}})),T=function(e){var t=e.setSearchFilter;return Object(C.jsxs)(S,{children:[Object(C.jsx)(w,{children:Object(C.jsx)(p.a,{})}),Object(C.jsx)(y,{onChange:function(e){t(e.target.value)},placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})},k=function(e){var t=e.setSearchFilter,a=Object(u.b)(),n=Object(i.g)();return Object(C.jsxs)(b.a,{position:"sticky",sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Object(C.jsx)(O.a,{variant:"subtitle1",sx:{ml:3},children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object(C.jsx)(T,{setSearchFilter:t}),Object(C.jsxs)(d.a,{sx:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(m.a,{color:"inherit",onClick:function(){a({type:"ON_LOGOUT"}),n("/")},children:"\u0432\u044b\u0439\u0442\u0438"}),Object(C.jsx)(x.a,{sx:{m:2,ml:1}})]})]})},E=a(103),z=a.n(E),D=a(187),L=a(179),I=a(189),_=a(174),F=a(102),P=a.n(F),A=a(105),W=a(184),q=a(173),B=a(101),G=a.n(B),J=a(100),M=a.n(J),R=function(e){var t=e.open,a=e.onClose,n=e.anchor,c=e.contact,r=e.onPopupOpen,s=e.pressEdited,i=c.id,o=Object(u.b)();return Object(C.jsxs)(A.a,{anchorEl:n,open:t,onClose:a,onClick:a,children:[Object(C.jsxs)(W.a,{onClick:function(){r(),s(),a()},children:[Object(C.jsx)(q.a,{children:Object(C.jsx)(M.a,{fontSize:"small"})}),"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"]}),Object(C.jsxs)(W.a,{onClick:function(){o(f(i)),a()},children:[Object(C.jsx)(q.a,{children:Object(C.jsx)(G.a,{fontSize:"small"})}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]})]})},U=a(15),$=a(178),V=a(183),H=a(171),K=a(176),Q=function(e){var t=e.contact,a=e.edit,c=e.state,r=e.onEdit,s=e.onSubmit,i=t.firstName,l=t.lastName,j=t.number,u=Object(n.useState)(i),b=Object(o.a)(u,2),x=b[0],f=b[1],h=Object(n.useState)(l),p=Object(o.a)(h,2),g=p[0],N=p[1],v=Object(n.useState)(j),S=Object(o.a)(v,2),w=S[0],y=S[1],T=Object(n.useState)(!1),k=Object(o.a)(T,2),E=k[0],z=k[1];Object(n.useEffect)((function(){""!==x&&""!==w&&w.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?z(!1):z(!0)}),[x,w]);return a?Object(C.jsxs)(d.a,{component:"form",onSubmit:s,sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:2},children:[Object(C.jsx)(K.a,{required:!0,label:"\u0418\u043c\u044f",variant:"standard",value:x,onChange:function(e){f(e.target.value),r(Object(U.a)(Object(U.a)({},c),{},{firstName:e.target.value}))},size:"small",autoFocus:!0}),Object(C.jsx)(K.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",variant:"standard",size:"small",value:g,onChange:function(e){N(e.target.value),r(Object(U.a)(Object(U.a)({},c),{},{lastName:e.target.value}))}}),Object(C.jsx)(K.a,{required:!0,label:"\u041d\u043e\u043c\u0435\u0440",variant:"standard",size:"small",value:w,onChange:function(e){y(e.target.value),r(Object(U.a)(Object(U.a)({},c),{},{number:e.target.value}))}}),Object(C.jsx)(m.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:E,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):Object(C.jsxs)(D.a,{sx:{display:"flex",flexDirection:"column",alignSelf:"flex-start",gap:1.5,mt:2},children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)(O.a,{color:"#9e9e9e",children:"\u0418\u043c\u044f:"}),Object(C.jsx)(O.a,{sx:{ml:1},children:i})]}),l?Object(C.jsxs)(L.a,{children:[Object(C.jsx)(O.a,{color:"#9e9e9e",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(C.jsx)(O.a,{sx:{ml:1},children:l})]}):null,Object(C.jsxs)(L.a,{children:[Object(C.jsx)(O.a,{color:"#9e9e9e",children:"\u041d\u043e\u043c\u0435\u0440:"}),Object(C.jsx)(O.a,{sx:{ml:1},children:j})]})]})},X=a(72),Y=a.n(X),Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},ee=function(e){var t=e.open,a=e.onPopupClose,c=e.contact,r=e.editedPressed,s=Object(u.b)(),i=c.firstName,l=c.lastName,b=c.shortName,h=c.image,p=c.id,g=l?"".concat(i," ").concat(l):i,N=Object(n.useState)(r),v=Object(o.a)(N,2),S=v[0],w=v[1],y=Object(n.useState)(Object(U.a)({},c)),T=Object(o.a)(y,2),k=T[0],E=T[1],z=function(){a(),w(!1)};return Object(C.jsx)($.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:z,closeAfterTransition:!0,BackdropComponent:V.a,BackdropProps:{timeout:500},children:Object(C.jsx)(H.a,{in:t,children:Object(C.jsxs)(d.a,{sx:Z,children:[Object(C.jsx)(j.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:z,children:Object(C.jsx)(Y.a,{})}),Object(C.jsx)(x.a,{src:h,size:"large",sx:{width:64,height:64,mb:2},children:h?"":b}),Object(C.jsx)(O.a,{variant:"h6",component:"h2",children:g}),Object(C.jsx)(Q,{contact:c,edit:S,onEdit:E,state:k,onSubmit:function(){w(!1),s(function(e,t){return{type:"ON_EDIT_CONTACT",contact:e,id:t}}(k,p))}}),S?null:Object(C.jsx)(m.a,{sx:{mt:2},fullWidth:!0,size:"large",onClick:function(){w(!0)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(C.jsx)(m.a,{size:"large",onClick:function(){z(),s(f(p))},fullWidth:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})})},te=function(e){var t=e.contact,a=t.firstName,c=t.lastName,r=t.number,s=t.shortName,i=t.image,l=c?"".concat(a," ").concat(c):a,u=Object(n.useState)(null),b=Object(o.a)(u,2),O=b[0],d=b[1],m=!!O,f=Object(n.useState)(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],N=Object(n.useState)(!1),v=Object(o.a)(N,2),S=v[0],w=v[1],y=function(){g(!0)};return Object(C.jsxs)(n.Fragment,{children:[Object(C.jsx)(ee,{open:p,onPopupClose:function(){g(!1),w(!1)},contact:t,editedPressed:S}),Object(C.jsxs)(L.a,{button:!0,onClick:y,children:[Object(C.jsx)(I.a,{children:Object(C.jsx)(x.a,{src:i,children:i?"":s})}),Object(C.jsx)(_.a,{primary:l,secondary:r}),Object(C.jsx)(j.a,{edge:"end","aria-label":"\u041c\u0435\u043d\u044e",onClick:function(e){e.stopPropagation(),d(e.currentTarget)},children:Object(C.jsx)(P.a,{})}),Object(C.jsx)(R,{open:m,onClose:function(e){e&&e.stopPropagation(),d(null)},anchor:O,contact:t,onPopupOpen:y,pressEdited:function(){return w(!0)}})]})]})},ae=function(e){var t=e.searchFilter,a=e.contacts;return 0===a.length?Object(C.jsx)(O.a,{variant:"subtitle1",align:"center",sx:{mt:2},children:"\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442!"}):0===a.filter((function(e){var a=e.firstName,n=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return a.toLowerCase().includes(r)||n.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).length&&a.length>0?Object(C.jsx)(O.a,{variant:"subtitle1",align:"center",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):Object(C.jsx)(D.a,{children:a.filter((function(e){var a=e.firstName,n=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return a.toLowerCase().includes(r)||n.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).map((function(e){return Object(C.jsx)(te,{contact:e},e.id)}))})},ne={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},ce=function(e){var t=e.open,a=e.onClose,c=Object(u.b)(),r=Object(n.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],b=Object(n.useState)(""),f=Object(o.a)(b,2),h=f[0],p=f[1],g=Object(n.useState)(!1),N=Object(o.a)(g,2),v=N[0],S=N[1];Object(n.useEffect)((function(){""!==i&&""!==h&&h.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?S(!1):S(!0)}),[i,h]);return Object(C.jsx)($.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:a,closeAfterTransition:!0,BackdropComponent:V.a,BackdropProps:{timeout:500},children:Object(C.jsx)(H.a,{in:t,children:Object(C.jsxs)(d.a,{sx:ne,children:[Object(C.jsx)(j.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:a,children:Object(C.jsx)(Y.a,{})}),Object(C.jsx)(x.a,{size:"large",sx:{width:64,height:64,mb:2}}),Object(C.jsx)(O.a,{variant:"h6",component:"h2",children:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"}),Object(C.jsxs)(d.a,{component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget),n={firstName:t.get("firstName"),lastName:t.get("lastName"),number:t.get("number")};c({type:"ON_ADD_CONTACT",contact:n}),a()},sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:3},children:[Object(C.jsx)(K.a,{required:!0,label:"\u0418\u043c\u044f",id:"firstName",name:"firstName",variant:"standard",size:"small",onChange:function(e){return l(e.target.value)},autoFocus:!0}),Object(C.jsx)(K.a,{id:"lastName",name:"lastName",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",variant:"standard",size:"small"}),Object(C.jsx)(K.a,{required:!0,id:"number",name:"number",label:"\u041d\u043e\u043c\u0435\u0440",variant:"standard",size:"small",onChange:function(e){return p(e.target.value)}}),Object(C.jsx)(m.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:v,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),Object(C.jsx)(m.a,{size:"large",onClick:a,fullWidth:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})},re=function(){var e=Object(u.c)((function(e){return e.user})),t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),b=Object(o.a)(s,2),O=b[0],d=b[1];return e?Object(C.jsxs)(n.Fragment,{children:[Object(C.jsx)(ce,{open:O,onClose:function(){d(!1)}}),Object(C.jsx)(k,{setSearchFilter:r}),Object(C.jsxs)(l.a,{maxWidth:"sm",sx:{pt:3},children:[Object(C.jsx)(ae,{searchFilter:c,contacts:e.contacts}),Object(C.jsx)(j.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"fixed",right:"32px",bottom:"32px"},onClick:function(){d(!0)},children:Object(C.jsx)(z.a,{sx:{fontSize:32}})})]})]}):Object(C.jsx)(i.a,{to:"/",replace:!0})},se=a(175),ie=a(70),oe=a(71),le=[{login:"user",password:"password",contacts:[{id:0,firstName:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439",lastName:"\u0418\u0432\u0430\u043d\u043e\u0432",shortName:"\u0414",number:"+79991234567",picture:null},{id:1,firstName:"\u0410\u043b\u0435\u043d\u0430",lastName:"\u041f\u0435\u0442\u0440\u043e\u0432\u0430",shortName:"\u0410",number:"+79211234567",picture:null},{id:2,firstName:"\u041c\u0430\u043c\u0430",lastName:"",shortName:"\u041c",number:"+79091234567",picture:null}]}],je=new(function(){function e(){Object(ie.a)(this,e)}return Object(oe.a)(e,[{key:"onLogin",value:function(e,t){return new Promise((function(a,n){var c=le.find((function(a){return a.login.toLowerCase()===e.toLowerCase()&&a.password===t}));setTimeout((function(){c?a(c):n(new Error("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"))}),100)}))}}]),e}()),ue=function(){var e=Object(u.b)(),t=Object(i.g)(),a=Object(n.useState)(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],l=Object(n.useState)(!1),j=Object(o.a)(l,2),b=j[0],O=j[1],d=Object(n.useState)(!1),x=Object(o.a)(d,2),f=x[0],h=x[1],p=Object(n.useState)(""),g=Object(o.a)(p,2),N=g[0],v=g[1],S=Object(n.useState)(""),w=Object(o.a)(S,2),y=w[0],T=w[1];return Object(n.useEffect)((function(){s(""===N||""===y),O(!1),h(!1)}),[N,y]),Object(C.jsxs)(se.a,{component:"form",onSubmit:function(a){a.preventDefault();var n=new FormData(a.currentTarget);je.onLogin(n.get("login"),n.get("password")).then((function(a){e({type:"ON_LOGIN",user:a}),t("/contacts")})).catch((function(){O(!0),h(!0),T("")}))},noValidate:!0,sx:{mt:1},children:[Object(C.jsx)(K.a,{margin:"normal",required:!0,fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"login",autoFocus:!0,error:b,onChange:function(e){v(e.target.value)}}),Object(C.jsx)(K.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",error:f,onChange:function(e){T(e.target.value)},value:y}),Object(C.jsx)(m.a,{type:"submit",fullWidth:!0,disabled:r,variant:"contained",sx:{mt:3,mb:2},children:"\u0432\u043e\u0439\u0442\u0438"})]})},be=function(){return Object(C.jsx)(l.a,{maxWidth:"xs",children:Object(C.jsxs)(se.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(C.jsx)(x.a,{sx:{m:2}}),Object(C.jsx)(O.a,{component:"h1",variant:"h5",children:"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(C.jsx)(ue,{})]})})},Oe=function(){return Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{path:"/",element:Object(C.jsx)(be,{})}),Object(C.jsx)(i.b,{path:"/contacts",element:Object(C.jsx)(re,{})})]})},de=a(104),me=a(17),xe={user:null,id:3},fe=function(e,t){return Object(U.a)(Object(U.a)({},t),{},{user:e})},he=function(e){return Object(U.a)(Object(U.a)({},e),{},{user:null})},pe=function(e,t){var a=t.user,n=t.id,c=a.contacts,r=e.firstName,s=e.lastName,i=e.number,o={id:n,firstName:r,lastName:s,shortName:r[0],number:i},l=[].concat(Object(me.a)(c),[o]);return Object(U.a)(Object(U.a)({},t),{},{id:n++,user:Object(U.a)(Object(U.a)({},a),{},{contacts:l.sort((function(e,t){return e.firstName-t.firstName}))})})},ge=function(e,t,a){var n=a.user,c=n.contacts,r=c.findIndex((function(e){return t===e.id})),s=[].concat(Object(me.a)(c.slice(0,r)),[e],Object(me.a)(c.slice(r+1)));return Object(U.a)(Object(U.a)({},a),{},{user:Object(U.a)(Object(U.a)({},n),{},{contacts:s.sort((function(e,t){return e.firstName-t.firstName}))})})},Ne=function(e,t){var a=t.user,n=a.contacts,c=n.findIndex((function(t){return e===t.id})),r=[].concat(Object(me.a)(n.slice(0,c)),Object(me.a)(n.slice(c+1)));return Object(U.a)(Object(U.a)({},t),{},{user:Object(U.a)(Object(U.a)({},a),{},{contacts:r})})},ve=localStorage.getItem("contactsSPA")?JSON.parse(localStorage.getItem("contactsSPA")):void 0,Ce=Object(de.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_LOGIN":return fe(t.user,e);case"ON_LOGOUT":return he(e);case"ON_ADD_CONTACT":return pe(t.contact,e);case"ON_EDIT_CONTACT":return ge(t.contact,t.id,e);case"ON_DELETE_CONTACT":return Ne(t.id,e);default:return e}}),ve);Ce.subscribe((function(){localStorage.setItem("contactsSPA",JSON.stringify(Ce.getState()))}));a(130);r.a.render(Object(C.jsx)(n.StrictMode,{children:Object(C.jsx)(u.a,{store:Ce,children:Object(C.jsx)(s.a,{children:Object(C.jsx)(Oe,{})})})}),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.85ae0b78.chunk.js.map