(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{133:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(32),r=a.n(c),s=a(112),i=a(14),o=a(10),l=a(194),j=a(195),u=a(25),b=a(189),d=a(81),O=a(173),m=a(184),x=a(185),h=function(e){return{type:"ON_DELETE_CONTACT",id:e}},f=a(104),p=a.n(f),g=a(23),v=a(4),N=a(79),C=a(1),w=Object(v.a)("div")((function(e){var t=e.theme;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(N.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(N.a)(t.palette.common.white,.25)}}})),S=Object(v.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),y=Object(v.a)(g.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width")}}})),T=function(e){var t=e.setSearchFilter;return Object(C.jsxs)(w,{children:[Object(C.jsx)(S,{children:Object(C.jsx)(p.a,{})}),Object(C.jsx)(y,{onChange:function(e){t(e.target.value)},placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})},k=function(e){var t=e.setSearchFilter,a=Object(u.b)(),n=Object(i.g)();return Object(C.jsxs)(b.a,{position:"sticky",sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Object(C.jsx)(d.a,{variant:"subtitle1",sx:{ml:3},children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object(C.jsx)(T,{setSearchFilter:t}),Object(C.jsxs)(O.a,{sx:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(m.a,{color:"inherit",onClick:function(){a({type:"ON_LOGOUT"}),n("/")},children:"\u0432\u044b\u0439\u0442\u0438"}),Object(C.jsx)(x.a,{sx:{m:2,ml:1}})]})]})},E=a(109),I=a.n(E),D=a(191),L=a(183),z=a(192),P=a(177),_=a(193),F=a(188),A=a(178),W=a(108),q=a.n(W),B=a(111),G=a(187),J=a(176),M=a(107),R=a.n(M),U=a(106),$=a.n(U),V=function(e){var t=e.open,a=e.onClose,n=e.anchor,c=e.contact,r=e.onPopupOpen,s=e.pressEdited,i=c.id,o=Object(u.b)();return Object(C.jsxs)(B.a,{anchorEl:n,open:t,onClose:a,onClick:a,children:[Object(C.jsxs)(G.a,{onClick:function(){r(),s(),a()},children:[Object(C.jsx)(J.a,{children:Object(C.jsx)($.a,{fontSize:"small"})}),"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"]}),Object(C.jsxs)(G.a,{onClick:function(){o(h(i)),a()},children:[Object(C.jsx)(J.a,{children:Object(C.jsx)(R.a,{fontSize:"small"})}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]})]})},H=a(16),K=a(181),Q=a(186),X=a(174),Y=a(180),Z=function(e){var t=e.contact,a=e.edit,c=e.state,r=e.onEdit,s=e.onSubmit,i=t.firstName,l=t.lastName,j=t.number,u=Object(n.useState)(i),b=Object(o.a)(u,2),x=b[0],h=b[1],f=Object(n.useState)(l),p=Object(o.a)(f,2),g=p[0],v=p[1],N=Object(n.useState)(j),w=Object(o.a)(N,2),S=w[0],y=w[1],T=Object(n.useState)(!1),k=Object(o.a)(T,2),E=k[0],I=k[1];Object(n.useEffect)((function(){""!==x&&""!==S&&S.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?I(!1):I(!0)}),[x,S]);return a?Object(C.jsxs)(O.a,{component:"form",onSubmit:s,sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:2},children:[Object(C.jsx)(Y.a,{required:!0,label:"\u0418\u043c\u044f",variant:"standard",value:x,onChange:function(e){h(e.target.value),r(Object(H.a)(Object(H.a)({},c),{},{firstName:e.target.value}))},size:"small",autoFocus:!0}),Object(C.jsx)(Y.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",variant:"standard",size:"small",value:g,onChange:function(e){v(e.target.value),r(Object(H.a)(Object(H.a)({},c),{},{lastName:e.target.value}))}}),Object(C.jsx)(Y.a,{required:!0,label:"\u041d\u043e\u043c\u0435\u0440",variant:"standard",size:"small",value:S,onChange:function(e){y(e.target.value),r(Object(H.a)(Object(H.a)({},c),{},{number:e.target.value}))}}),Object(C.jsx)(m.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:E,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):Object(C.jsxs)(D.a,{sx:{display:"flex",flexDirection:"column",alignSelf:"flex-start",gap:1.5,mt:2},children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)(d.a,{color:"#9e9e9e",children:"\u0418\u043c\u044f:"}),Object(C.jsx)(d.a,{sx:{ml:1},children:i})]}),l?Object(C.jsxs)(L.a,{children:[Object(C.jsx)(d.a,{color:"#9e9e9e",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(C.jsx)(d.a,{sx:{ml:1},children:l})]}):null,Object(C.jsxs)(L.a,{children:[Object(C.jsx)(d.a,{color:"#9e9e9e",children:"\u041d\u043e\u043c\u0435\u0440:"}),Object(C.jsx)(d.a,{sx:{ml:1},children:j})]})]})},ee=a(75),te=a.n(ee),ae={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},ne=function(e){var t=e.open,a=e.onPopupClose,c=e.contact,r=e.editedPressed,s=Object(u.b)(),i=c.firstName,l=c.lastName,j=c.shortName,b=c.image,f=c.id,p=l?"".concat(i," ").concat(l):i,g=Object(n.useState)(r),v=Object(o.a)(g,2),N=v[0],w=v[1],S=Object(n.useState)(Object(H.a)({},c)),y=Object(o.a)(S,2),T=y[0],k=y[1],E=function(){a(),w(!1)};return Object(C.jsx)(K.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:E,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500},children:Object(C.jsx)(X.a,{in:t,children:Object(C.jsxs)(O.a,{sx:ae,children:[Object(C.jsx)(z.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:E,children:Object(C.jsx)(te.a,{})}),Object(C.jsx)(x.a,{src:b,size:"large",sx:{width:64,height:64,mb:2},children:b?"":j}),Object(C.jsx)(d.a,{variant:"h6",component:"h2",children:p}),Object(C.jsx)(Z,{contact:c,edit:N,onEdit:k,state:T,onSubmit:function(){w(!1),s(function(e,t){return{type:"ON_EDIT_CONTACT",contact:e,id:t}}(T,f))}}),N?null:Object(C.jsx)(m.a,{sx:{mt:2},fullWidth:!0,size:"large",onClick:function(){w(!0)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(C.jsx)(m.a,{size:"large",onClick:function(){E(),s(h(f))},fullWidth:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})})},ce=function(e){var t=e.contact,a=t.firstName,c=t.lastName,r=t.number,s=t.shortName,i=t.image,l=t.id,j=c?"".concat(a," ").concat(c):a,u=Object(n.useState)(null),b=Object(o.a)(u,2),d=b[0],O=b[1],m=!!d,h=Object(n.useState)(!1),f=Object(o.a)(h,2),p=f[0],g=f[1],v=Object(n.useState)(!1),N=Object(o.a)(v,2),w=N[0],S=N[1],y=function(){g(!0)},T=Object(n.useState)(!0),k=Object(o.a)(T,2),E=k[0],I=k[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){I(!1)}),1e3);return function(){clearTimeout(e)}})),Object(C.jsxs)(n.Fragment,{children:[Object(C.jsx)(ne,{open:p,onPopupClose:function(){g(!1),S(!1)},contact:t,editedPressed:w}),Object(C.jsx)(L.a,{disablePadding:!0,secondaryAction:E?null:Object(C.jsx)(z.a,{edge:"end","aria-label":"\u041c\u0435\u043d\u044e",onClick:function(e){e.stopPropagation(),O(e.currentTarget)},children:Object(C.jsx)(q.a,{})}),children:Object(C.jsxs)(P.a,{onClick:y,sx:{p:2},children:[Object(C.jsx)(_.a,{children:E?Object(C.jsx)(F.a,{animation:"wave",variant:"circular",width:40,height:40}):Object(C.jsx)(x.a,{src:i,children:i?"":s})}),E?Object(C.jsxs)(A.a,{children:[Object(C.jsx)(F.a,{animation:"wave",width:160}),Object(C.jsx)(F.a,{animation:"wave",width:96})]}):Object(C.jsx)(A.a,{primary:j,secondary:r})]})},l),Object(C.jsx)(V,{open:m,onClose:function(e){e&&e.stopPropagation(),O(null)},anchor:d,contact:t,onPopupOpen:y,pressEdited:function(){return S(!0)}})]})},re=function(e){var t=e.searchFilter,a=e.contacts;return 0===a.length?Object(C.jsx)(d.a,{variant:"subtitle1",align:"center",sx:{mt:2},children:"\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442!"}):0===a.filter((function(e){var a=e.firstName,n=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return a.toLowerCase().includes(r)||n.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).length&&a.length>0?Object(C.jsx)(d.a,{variant:"subtitle1",align:"center",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):Object(C.jsx)(D.a,{children:a.filter((function(e){var a=e.firstName,n=e.number,c=e.lastName?e.lastName:"",r=t.toLowerCase();return a.toLowerCase().includes(r)||n.toLowerCase().includes(r)||c.toLowerCase().includes(r)})).sort((function(e,t){return se(e.firstName,t.firstName)})).map((function(e){return Object(C.jsx)(ce,{contact:e},e.id)}))})},se=function(e,t){return e>t?1:e===t?0:e<t?-1:void 0},ie={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:16,p:4,pt:6,display:"flex",flexDirection:"column",alignItems:"center"},oe=function(e){var t=e.open,a=e.onClose,c=Object(u.b)(),r=Object(n.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],j=Object(n.useState)(""),b=Object(o.a)(j,2),h=b[0],f=b[1],p=Object(n.useState)(!1),g=Object(o.a)(p,2),v=g[0],N=g[1];Object(n.useEffect)((function(){""!==i&&""!==h&&h.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/)?N(!1):N(!0)}),[i,h]);return Object(C.jsx)(K.a,{disableEnforceFocus:!0,"aria-labelledby":"contact",open:t,onClose:a,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500},children:Object(C.jsx)(X.a,{in:t,children:Object(C.jsxs)(O.a,{sx:ie,children:[Object(C.jsx)(z.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",size:"large",color:"primary",sx:{position:"absolute",right:"8px",top:"8px"},onClick:a,children:Object(C.jsx)(te.a,{})}),Object(C.jsx)(x.a,{size:"large",sx:{width:64,height:64,mb:2}}),Object(C.jsx)(d.a,{variant:"h6",component:"h2",children:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"}),Object(C.jsxs)(O.a,{component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget),n={firstName:t.get("firstName"),lastName:t.get("lastName"),number:t.get("number")};c({type:"ON_ADD_CONTACT",contact:n}),a()},sx:{display:"flex",flexDirection:"column",gap:2.2,width:"90%",mt:3},children:[Object(C.jsx)(Y.a,{required:!0,label:"\u0418\u043c\u044f",id:"firstName",name:"firstName",variant:"standard",size:"small",onChange:function(e){return l(e.target.value)},autoFocus:!0}),Object(C.jsx)(Y.a,{id:"lastName",name:"lastName",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",variant:"standard",size:"small"}),Object(C.jsx)(Y.a,{required:!0,id:"number",name:"number",label:"\u041d\u043e\u043c\u0435\u0440",variant:"standard",size:"small",onChange:function(e){return f(e.target.value)}}),Object(C.jsx)(m.a,{sx:{mt:3},fullWidth:!0,size:"large",type:"submit",disabled:v,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),Object(C.jsx)(m.a,{size:"large",onClick:a,fullWidth:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})})},le=function(){var e=Object(u.c)((function(e){return e.user})),t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),b=Object(o.a)(s,2),d=b[0],O=b[1];return e?Object(C.jsxs)(n.Fragment,{children:[Object(C.jsx)(oe,{open:d,onClose:function(){O(!1)}}),Object(C.jsx)(k,{setSearchFilter:r}),Object(C.jsxs)(l.a,{maxWidth:"sm",sx:{pt:3},children:[Object(C.jsx)(re,{searchFilter:c,contacts:e.contacts}),Object(C.jsx)(j.a,{color:"primary","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",onClick:function(){O(!0)},sx:{position:"fixed",right:"32px",bottom:"32px"},children:Object(C.jsx)(I.a,{})})]})]}):Object(C.jsx)(i.a,{to:"/",replace:!0})},je=a(179),ue=a(73),be=a(74),de=[{login:"user",password:"password",contacts:[{id:0,firstName:"\u0410\u043b\u0435\u043d\u0430",lastName:"\u041f\u0435\u0442\u0440\u043e\u0432\u0430",shortName:"\u0410",number:"+79211234567",picture:null},{id:1,firstName:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439",lastName:"\u0418\u0432\u0430\u043d\u043e\u0432",shortName:"\u0414",number:"+79991234567",picture:null},{id:2,firstName:"\u041c\u0430\u043c\u0430",lastName:"",shortName:"\u041c",number:"+79091234567",picture:null}]}],Oe=new(function(){function e(){Object(ue.a)(this,e)}return Object(be.a)(e,[{key:"onLogin",value:function(e,t){return new Promise((function(a,n){var c=de.find((function(a){return a.login.toLowerCase()===e.toLowerCase()&&a.password===t}));setTimeout((function(){c?a(c):n(new Error("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"))}),100)}))}}]),e}()),me=function(){var e=Object(u.b)(),t=Object(i.g)(),a=Object(n.useState)(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],l=Object(n.useState)(!1),j=Object(o.a)(l,2),b=j[0],d=j[1],O=Object(n.useState)(!1),x=Object(o.a)(O,2),h=x[0],f=x[1],p=Object(n.useState)(""),g=Object(o.a)(p,2),v=g[0],N=g[1],w=Object(n.useState)(""),S=Object(o.a)(w,2),y=S[0],T=S[1];return Object(n.useEffect)((function(){s(""===v||""===y),""!==y&&(d(!1),f(!1))}),[v,y]),Object(C.jsxs)(je.a,{component:"form",onSubmit:function(a){a.preventDefault();var n=new FormData(a.currentTarget);Oe.onLogin(n.get("login"),n.get("password")).then((function(a){e({type:"ON_LOGIN",user:a}),t("/contacts")})).catch((function(){d(!0),f(!0),T("")}))},noValidate:!0,sx:{mt:1},children:[Object(C.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"login",autoFocus:!0,error:b,onChange:function(e){N(e.target.value)}}),Object(C.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",error:h,onChange:function(e){T(e.target.value)},value:y}),Object(C.jsx)(m.a,{type:"submit",fullWidth:!0,disabled:r,variant:"contained",sx:{mt:3,mb:2},children:"\u0432\u043e\u0439\u0442\u0438"})]})},xe=function(){return Object(C.jsx)(l.a,{maxWidth:"xs",children:Object(C.jsxs)(je.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(C.jsx)(x.a,{sx:{m:2}}),Object(C.jsx)(d.a,{component:"h1",variant:"h5",children:"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(C.jsx)(me,{})]})})},he=function(){return Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{path:"/",element:Object(C.jsx)(xe,{})}),Object(C.jsx)(i.b,{path:"/contacts",element:Object(C.jsx)(le,{})})]})},fe=a(110),pe=a(17),ge={user:null,uniqueId:3},ve=function(e,t){return Object(H.a)(Object(H.a)({},t),{},{user:e})},Ne=function(e){return Object(H.a)(Object(H.a)({},e),{},{user:null})},Ce=function(e,t){var a=t.user,n=t.uniqueId,c=a.contacts,r=e.firstName,s=e.lastName,i=e.number,o={id:n,firstName:r,lastName:s,shortName:r[0],number:i},l=[].concat(Object(pe.a)(c),[o]);return Object(H.a)(Object(H.a)({},t),{},{uniqueId:n++,user:Object(H.a)(Object(H.a)({},a),{},{contacts:l})})},we=function(e,t,a){var n=a.user,c=n.contacts,r=c.findIndex((function(e){return t===e.id})),s=[].concat(Object(pe.a)(c.slice(0,r)),[e],Object(pe.a)(c.slice(r+1)));return Object(H.a)(Object(H.a)({},a),{},{user:Object(H.a)(Object(H.a)({},n),{},{contacts:s})})},Se=function(e,t){var a=t.user,n=a.contacts,c=n.findIndex((function(t){return e===t.id})),r=[].concat(Object(pe.a)(n.slice(0,c)),Object(pe.a)(n.slice(c+1)));return Object(H.a)(Object(H.a)({},t),{},{user:Object(H.a)(Object(H.a)({},a),{},{contacts:r})})},ye=localStorage.getItem("contactsSPA")?JSON.parse(localStorage.getItem("contactsSPA")):void 0,Te=Object(fe.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_LOGIN":return ve(t.user,e);case"ON_LOGOUT":return Ne(e);case"ON_ADD_CONTACT":return Ce(t.contact,e);case"ON_EDIT_CONTACT":return we(t.contact,t.id,e);case"ON_DELETE_CONTACT":return Se(t.id,e);default:return e}}),ye);Te.subscribe((function(){localStorage.setItem("contactsSPA",JSON.stringify(Te.getState()))}));a(133);r.a.render(Object(C.jsx)(n.StrictMode,{children:Object(C.jsx)(u.a,{store:Te,children:Object(C.jsx)(s.a,{children:Object(C.jsx)(he,{})})})}),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.89691f49.chunk.js.map